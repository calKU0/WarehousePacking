@inject IJSRuntime JSRuntime

<div class="mb-3 flex-shrink-0">
    <input type="text" @ref="inputRef" @onkeydown="OnKeyDown" class="form-control form-control" placeholder="Skanuj kod..." disabled="@Disabled" />
</div>

@code {
    private ElementReference inputRef;
    [Parameter] public EventCallback<KeyboardEventArgs> OnKeyDown { get; set; }
    [Parameter] public bool Disabled { get; set; } = false;

    // Focus input
    public async Task FocusAsync()
    {
        try
        {
            await JSRuntime.InvokeVoidAsync("blazorFocus.focusElement", inputRef);
        }
        catch (Exception)
        {
            // Ignore JS exceptions (e.g., if the element is not yet rendered)
        }
    }

    // Get current value
    public async Task<string> GetValueAsync()
    {
        return await JSRuntime.InvokeAsync<string>("blazorFocus.getValue", inputRef);
    }

    // Clear value
    public async Task ClearAsync()
    {
        await JSRuntime.InvokeVoidAsync("blazorFocus.clearValue", inputRef);
    }
}